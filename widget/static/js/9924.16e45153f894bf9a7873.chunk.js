"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[9874,9924],{45285(t,e,o){o.d(e,{bs:()=>p});var a=o(89379),l=o(10467),i=o(80415),d=o(296),n=o(52867),s=o(66345),r=o(14313),c=[],u=function(){var t=(0,l.A)(function*(t){return["taggbox.com","tagbox.com","tagembed.com","socialwalls.com"].some(e=>t.includes(e))||(yield fetch(t).then(t=>t.ok).catch(()=>!1))});return function(e){return t.apply(this,arguments)}}(),p=t=>{t.persist();var e=t.target,{network:o,itemId:a,themeId:l}=e.dataset;if(1!=o||[3,4,16,47,50,55,60].includes(l))c.includes(t)||c.push(t);else{var i=document.querySelector(".tb_media-".concat(a));i&&(i.style.display="none")}1===c.length&&m()},m=function(){var t=(0,l.A)(function*(){var t,{postData:e,wall:o}=d.A.getState().appData;if(o&&Object.keys(o).length&&c.length){var l,{User:p,Wall:h}=o,g=null===p||void 0===p?void 0:p.id,f=(s.aD,null===h||void 0===h?void 0:h.id),_=null===(t=c[0])||void 0===t?void 0:t.target,{filterId:b,network:w,itemId:y,load:I}=_.dataset,k=document.querySelector('img[data-item-id="'.concat(y,'"]')),x=null!==e&&void 0!==e&&e.completeDataObject?Object.values(e.completeDataObject).filter(t=>t.id===y):[];if(null!==x&&void 0!==x&&x.length)if(!(yield u(null===(l=x[0])||void 0===l?void 0:l.postFileNew))&&k){if([2,18,3,28].includes(+w)&&"0"===I&&"34"!==b&&!_.src.includes("cloud.taggbox.com")){var j=((t,e,o)=>{var l,i,d,n,s,{UserPlan:r,Wall:c}=e;return(0,a.A)((0,a.A)((0,a.A)({table_name:null===r||void 0===r?void 0:r.db_table},t),null!==o&&void 0!==o&&o.length?{feedId:null===(l=o[0])||void 0===l?void 0:l.feedId,type:null===(i=o[0])||void 0===i?void 0:i.type,link:null===(d=o[0])||void 0===d?void 0:d.link,postFile:null===(n=o[0])||void 0===n?void 0:n.postFile,mediaFile:null===(s=o[0])||void 0===s?void 0:s.mediaFile}:{}),{},{url:null===c||void 0===c?void 0:c.url})})({wallId:f,postId:y,ownerId:g},o,x);try{var{data:N}=yield(new r.A).post(s.t5,j,{headers:(0,n.Ky)()}),P=s.aD?"https://images.".concat(s.QR,"/"):"";_.src="18"===w?"".concat(P).concat(N.media):N.media}catch(S){_.src=i.gX}finally{v(_)}}else _.src=i.gX,v(_);c.shift(),m()}else{var A="".concat(i.th,"media/images/no-image.svg");_.src=A,_.srcset=A,v(_),c.shift()}}});return function(){return t.apply(this,arguments)}}(),v=t=>t.setAttribute("data-load","1")},69924(t,e,o){o.r(e),o.d(e,{default:()=>s});var a=o(9950),l=o(89874),i=o(80415),d=o(45285),n=o(44414);class s extends a.PureComponent{constructor(t){super(t),this.state={mediaLoaded:!1}}UNSAFE_componentWillReceiveProps(t){var{Post:e}=t,{media:o}=e;this.props.Post!==e&&this.setState({imgSize:{small:o.image.small,large:o.image.large,orignal:o.image.orignal}})}render(){var{Post:t,opacity:e,mediaSize:o,Products:a,Item:s,ThemeInfo:r,showTooltip:c}=this.props,{mediaLoaded:u}=this.state,p=s||t.media,m=!!(a&&a.length>0&&t.hotspot),v={opacity:e,filter:u?"blur(2px)":null,aspectRatio:"".concat(o.width,"/").concat(o.height)};return(0,n.jsxs)("div",{className:"tb_post_modal_img_holder",children:[m?(0,n.jsx)(l.default,{isPopup:!0,products:a,Post:t,showTooltip:c}):null,(0,n.jsx)("img",{className:"tb_post_modal_img_",decoding:"async",src:p.image.small,srcSet:"".concat(p.image.large,", 991w ").concat(p.image.small,", 480w"),sizes:o&&o.width,alt:"","data-link":t.link,"data-network":t.networkId,"data-wall-id":r.wallId,"data-owner-id":r.ownerId,"data-item-id":t.id,"data-feed-id":r.feedId?r.feedId:"","data-load":"0",onLoad:this.handleImageLoad,onError:t=>{var e,o,a,l;if(t.target.src!==(null===p||void 0===p||null===(e=p.image)||void 0===e?void 0:e.small)&&null!==p&&void 0!==p&&null!==(o=p.image)&&void 0!==o&&o.small)return t.target.src=null===p||void 0===p||null===(a=p.image)||void 0===a?void 0:a.small,void(t.target.srcset=null===p||void 0===p||null===(l=p.image)||void 0===l?void 0:l.small);t.target.src="".concat(i.th,"media/error/no-image.svg"),t.target.srcset="".concat(i.th,"media/error/no-image.svg"),(0,d.bs)(t)},loading:"lazy",draggable:"false",width:o&&o.width,height:o&&o.height,style:v})]})}}},89874(t,e,o){o.r(e),o.d(e,{default:()=>m});var a=o(89379),l=o(9950),i=o(10300),d=o(1823),n=o(21850),s=o(82652),r=o(44414),c=(0,l.memo)(t=>{var{item:e}=t,o=e.discount>0&&e.discount!==e.price,a=e.discount>0?e.discount:e.price;return(0,r.jsxs)("a",{hotspot:1,href:e.url,target:"_blank",rel:"noopener noreferrer",className:"tb_tooltip_wrap",children:[(0,r.jsx)("div",{hotspot:1,className:"tb_p_tooltip_title",children:e.title}),o&&(0,r.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price tb_price_disabled",children:[e.currency,e.price]}),(e.price>0||e.discount>0)&&(0,r.jsxs)("div",{hotspot:1,className:"tb_p_tooltip_price",children:[e.currency,a]})]})}),u=t=>{var{products:e,appData:o,Post:i,showTooltip:u,isPopup:p}=t,[m,v]=(0,l.useState)(null),h=(0,l.useMemo)(()=>{var t,e;return(null===o||void 0===o||null===(t=o.wall)||void 0===t||null===(e=t.ProductSetting)||void 0===e?void 0:e.Hotspot)||{}},[o]);(0,l.useEffect)(()=>{if(u){var t=e.findIndex(t=>t.id===u);-1!==t&&v(t)}else v(null)},[u,e]);var g=(0,l.useCallback)(t=>{var e,a,l,d;null!==o&&void 0!==o&&o.wall&&(0,n.hq)({type:1,action:2,wall:null===o||void 0===o||null===(e=o.wall)||void 0===e||null===(a=e.ThemeInfo)||void 0===a?void 0:a.webId,product_id:t.id,post:i.referenceId,owner:null===o||void 0===o||null===(l=o.wall)||void 0===l||null===(d=l.ThemeInfo)||void 0===d?void 0:d.ownerId,feed:i.feedId,currency:t.currencyCode,price:Number(t.discount)>0?t.discount:t.price})},[o,i]),f=(0,l.useCallback)((t,e)=>{t.stopPropagation(),g(e),window.open(e.url,"_blank")},[g]);return null!==h&&void 0!==h&&h.status?e.map((t,e)=>{var o="hotspot-".concat(t.id,"-").concat(e).concat(p?"-pop":""),l=m===e;return(0,r.jsxs)("div",{id:o,className:"tb_hotspot_dot".concat(l?" tb_hotspot_active_":""),role:"button",style:{top:t.hotspot.top,left:t.hotspot.left},onMouseEnter:()=>v(e),onMouseLeave:()=>v(null),onClick:e=>{f(e,t)},"data-tooltip-offset":7,children:[(0,r.jsx)("div",{hotspot:1,className:"tb_hotspot__ ".concat(0===h.type?"tb_hotspot_ani__":""),children:e+1}),(0,r.jsx)(s.A,{wallId:o,children:(0,r.jsx)(d.m_,(0,a.A)((0,a.A)({appendTo:"body","data-tooltip-id":"tooltip-".concat(t.id,"-").concat(e).concat(p?"-pop":""),className:"tb_pro_tooltip",anchorSelect:"#".concat(o),clickable:!0},p?{isOpen:l}:{}),{},{children:(0,r.jsx)(c,{item:t})}),e)})]},"".concat(t.id,"-").concat(e))}):null},p=(0,l.memo)(u);const m=(0,i.Ng)(t=>({appData:t.appData}))(p)}}]);