"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[586],{17586:function(e,t,i){i.r(t),i.d(t,{default:function(){return q}});var a=i(15671),n=i(43144),s=i(79340),o=i(54062),r=i(72791),l=i(60364),c=i(1413),d=i(80184),u=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;(0,a.Z)(this,i);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={uploadHide:!0},e.handleHide=function(t){return e.setState({uploadHide:!1})},e}return(0,n.Z)(i,[{key:"render",value:function(){this.state.uploadHide;var e=this.props,t=(e.updateImageWithData,e.hasActive,e.onClickToUpdateStep),i=e.isActiveIndex,a=e.isAddMoreActive,n=e.addCaption,s=e.item,o=e.onClickToUpdateMoreStep;return(0,d.jsxs)("div",{className:"tb_onsite_add_caption_tab",children:[(0,d.jsxs)("div",{className:"tb_onsite_form_group",children:[(0,d.jsx)("textarea",{className:"tb_onsite_form_control_textarea",rows:"2",placeholder:"Add your caption here....",onChange:n(i),value:s&&s.caption?s.caption:""}),s.error?(0,d.jsx)("div",{className:"tb_onsite_error",children:"* Please add caption."}):null]}),(0,d.jsxs)("div",{className:"tb_onsite_form_actions",style:s&&a?{justifyContent:"space-between"}:null,children:[s&&a?(0,d.jsx)("div",{className:"tb_onsite_btn_secondary",onClick:o(2),children:"Skip"}):null,(0,d.jsx)("div",{className:"tb_onsite_btn_primary",id:"tb_onsite_btn_id",onClick:t(2),children:"Next"})]})]})}}]),i}(r.Component),m=u,p=i(55112),_=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"render",value:function(){var e=this.props,t=(e.isEdit,e.upload_image),i=e.onClickToRemove,a=e.onClickToEdit;return(0,d.jsx)(d.Fragment,{children:t&&t.map((function(e,t){return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"tb_onsite_post_area",children:[(0,d.jsxs)("div",{className:"tb_onsite_post_info",children:[e.thumb_file?(0,d.jsx)("div",{className:"tb_onsite_post_media",style:{backgroundImage:"url(".concat(e.thumb_file,")")}}):null,(0,d.jsxs)("div",{className:"tb_onsite_post_content_wrap",children:[(0,d.jsxs)("div",{className:"tb_onsite_post_content__",children:[" ",e.caption&&e.caption.length>0?e.caption:e.review&&e.review.length>0?e.review:null]}),""==e.caption&&e.rating||e.review&&e.review.length>0?(0,d.jsx)(p.Z,{edit:!1,count:5,size:20,value:e.rating}):null]})]}),(0,d.jsxs)("div",{className:"tb_onsite_post_actions",children:[(0,d.jsx)("div",{className:"tb_onsite_edit_post",onClick:a(t),children:(0,d.jsx)("div",{className:"tb_onsite_edit_icon tb__icon tb-edit",children:(0,d.jsx)("div",{})})}),(0,d.jsx)("div",{className:"tb_onsite_remove_post",onClick:i(t),children:(0,d.jsx)("div",{className:"tb_onsite_remove_icon tb__icon tb-delete",children:(0,d.jsx)("div",{})})})]})]})})}))})}}]),i}(r.Component),h=_,g=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.submitError,i=e.termsCheck,a=e.submitErrorMessage,n=e.wall,s=e.onClickToaddMore,o=e.onSubmitPostData,r=e.upload_image,l=e.onClickToRemove,c=e.isEdit,u=e.onTextName,m=e.onTextEmail,p=e.email,_=e.name,g=(e.receiveMail,e.tandc,e.onUpdatereceiveMail,e.nameError),v=e.emailError,b=e.onClickToEdit,x=e.apiRequest;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"tb_onsite_box_title",children:[(0,d.jsx)("div",{className:"tb_onsite_title",children:"Fill out the following information"}),(0,d.jsxs)("div",{className:"tb_onsite_sub_heading",children:[(0,d.jsx)("div",{className:"tb_onsite_sup",children:"*"})," Indicates required field"]})]}),(0,d.jsx)("div",{className:"tb_onsite_box_body",children:(0,d.jsxs)("div",{className:"tb_onsite_tabs_content",children:[r&&r.length>0?(0,d.jsx)(h,{upload_image:r,onClickToRemove:l,isEdit:c,onClickToEdit:b}):null,(0,d.jsx)("div",{className:"tb_onsite_form",children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"tb_onsite_form_group",children:[(0,d.jsxs)("div",{className:"tb_onsite_form_label",children:["Your Name",(0,d.jsx)("div",{className:"tb_onsite_sup",children:"*"})]}),(0,d.jsx)("input",{type:"text",className:"tb_onsite_form_control",placeholder:"Enter Your Name",onChange:u,value:_}),g?(0,d.jsx)("div",{className:"tb_onsite_error",children:"Please enter correct your name."}):null]}),(0,d.jsxs)("div",{className:"tb_onsite_form_group",children:[(0,d.jsxs)("div",{className:"tb_onsite_form_label",children:["Email Address",(0,d.jsx)("div",{className:"tb_onsite_sup",children:"*"})]}),(0,d.jsx)("input",{type:"email",className:"tb_onsite_form_control",placeholder:"Enter Your Email",onChange:m,value:p}),v?(0,d.jsx)("div",{className:"tb_onsite_error",children:"Please enter correct email."}):null]}),[104746].includes(n.Wall.owner)?(0,d.jsxs)("div",{className:"tb_onsite_terms_condition",children:[(0,d.jsxs)("label",{style:{display:"flex"},children:[(0,d.jsx)("input",{onClick:function(e){return i(e.target.checked?1:0)},className:"display-flex",type:"checkbox"}),(0,d.jsx)("span",{style:{marginLeft:"5px"},children:" I agree to CALM using my story for marketing purposes --"})]}),(0,d.jsx)("a",{style:{color:"#1154cc",fontWeight:"normal",fontSize:"11px",paddingLeft:"26px"},href:n.UgcSettings.onsite_term_url,target:"_blank",children:" click for more information on how your story will be used."})]}):(0,d.jsxs)("div",{className:"tb_onsite_terms_condition",children:["By clicking on Submit, you are agreeing to our",(0,d.jsx)("a",{href:n.UgcSettings.onsite_term_url,target:"_blank",children:" terms and conditions *"})]}),t?(0,d.jsxs)("div",{className:"tb_onsite_error",children:["* ",a||(r&&0==r.length?"Please include atleast one post.":"Please check complete details.")]}):null,(0,d.jsxs)("div",{className:"tb_onsite_form_actions_footer",children:[(0,d.jsxs)("div",{className:"tb_onsite_btn_wrapper",children:[(0,d.jsx)("div",{className:"tb_onsite_btn_secondary",onClick:s,children:"+ Add More Post"}),(0,d.jsxs)("div",{className:"tb_onsite_post_limits",children:[(0,d.jsx)("div",{className:"tb_onsite_sup",children:"*"})," Max 20 Posts"]})]}),(0,d.jsx)("div",{className:"tb_onsite_btn_primary".concat(x?" tb_onsite_spinner":""),onClick:o,children:n.UgcSettings.onsite_popup_btn_txt})]})]})})]})})]})}}]),i}(r.Component),v=g,b=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;(0,a.Z)(this,i);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).ratingChanged=function(t){var i=e.props,a=i.isActiveIndex;(0,i.addRatings)(t,a)},e}return(0,n.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.onClickToUpdateStep,i=e.isAddMoreActive,a=e.isActiveIndex,n=e.addReview,s=e.item,o=e.onClickToUpdateMoreStep;return(0,d.jsxs)("div",{className:"tb_onsite_add_caption_tab",children:[(0,d.jsxs)("div",{className:"tb_onsite_form_group",children:[(0,d.jsx)("textarea",{className:"tb_onsite_form_control_textarea",rows:"2",placeholder:"Add your review here....",onChange:n(a),value:s&&s.review?s.review:""}),s.error?(0,d.jsx)("div",{className:"tb_onsite_error",children:"* Please add review and ratings."}):null]}),(0,d.jsx)("div",{className:"tb_onsite_rating",children:(0,d.jsx)(p.Z,{size:24,count:5,onChange:this.ratingChanged,value:s&&s.rating?s.rating:0})}),(0,d.jsxs)("div",{className:"tb_onsite_form_actions",style:s&&i?{justifyContent:"space-between"}:null,children:[s&&i?(0,d.jsx)("div",{className:"tb_onsite_btn_secondary",onClick:o(2),children:"Skip"}):null,(0,d.jsx)("div",{className:"tb_onsite_btn_primary",id:"tb_onsite_btn_id",onClick:t(2),children:"Next"})]})]})}}]),i}(r.Component),x=b,f=i(79200),S=function(e){var t=e.onClosePopUp;return(0,d.jsx)("div",{className:"tb_onsite_close_btn_wrapper",onClick:t,children:(0,d.jsx)("div",{className:"tb_onsite_close_btn tb__icon tb-close-alt",children:(0,d.jsx)("div",{})})})},j=function(e){var t=e.wall;return t.UgcSettings&&t.UgcSettings.onsite_logo&&""!=t.UgcSettings.onsite_logo?(0,d.jsx)("div",{className:"tb_onsite_logo_wrap",children:(0,d.jsx)("img",{loading:"lazy",src:t.UgcSettings.onsite_logo,className:"tb_onsite_popup_logo",width:"400",height:"50",alt:"logo"})}):null},y=i(74569),w=i.n(y),k=i(39457),N=function(){return(0,d.jsxs)("div",{className:"uppy-Root uppy-StatusBar is-postprocessing","aria-hidden":"false",dir:"ltr",children:[(0,d.jsx)("div",{className:"uppy-StatusBar-progress is-indeterminate",role:"progressbar","aria-label":"100%","aria-valuetext":"100%","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"100",style:{width:"100%"}}),(0,d.jsxs)("div",{className:"uppy-StatusBar-content",children:[(0,d.jsx)("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:(0,d.jsx)("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})}),"Uploading..."]})]})},C=i(65025),U=i.n(C),T=i(40372),A=i.n(T),E=(0,n.Z)((function e(t,i){(0,a.Z)(this,e),this.uppy=new(U())({meta:{type:"avatar"},autoProceed:!0,debug:!0,allowMultipleUploads:!0,restrictions:{maxFileSize:104857600,maxNumberOfFiles:1,minNumberOfFiles:1,allowedFileTypes:["image/*","video/*"]},onBeforeFileAdded:t,onBeforeUpload:i}),this.uppy.use(A(),{params:{auth:{key:"0701d3d7f8d94e92a65a9cba388b1d96"},steps:{store:{robot:"/wasabi/store",bucket_region:"us-west-1",result:!0,bucket:"cloud.taggbox.com",key:"47ABVORKG52UYE1KB28S",secret:"pcaTfeokaz28geAAns08H3yaGbOVz6ILgTptu19v",path:"onsiteupload/images/${file.id}"}}},waitForEncoding:!0})})),P=i(46535),M=i(2703),I=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;(0,a.Z)(this,i);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={isLoading:!1,selectedFile:null,selectedUrl:null,type:null,thumb_file:"",fileSize:!1,filemaxSize:0,throwError:!1,videoPath:"",fileSizeText:"",ext:null,size:0,fileName:null,mediaHeight:0,mediaWidth:0},e.beforeFileAdded=function(t,i){(0,M.AB)(1);var a=(0,M.RD)(t.size),n=a.size,s=a.sizeText;if(["GB","TB"].includes(s))e.setState({fileSize:!0,fileSizeText:"".concat(n).concat(s)},(function(){return setTimeout((function(){return e.setState({fileSize:!1,fileSizeText:""})}),2e3)})),(0,M.AB)(2);else if("MB"==s){var o=t.meta.type.includes("image")?4:5,r=4==o?15:100;if(n>=r)return e.setState({type:o,filemaxSize:r,fileSize:!0,fileSizeText:"".concat(n).concat(s)},(function(){return setTimeout((function(){return e.setState({fileSize:!1,fileSizeText:""})}),5e3)})),(0,M.AB)(2),!1}},e.beforeUpload=function(t){var i=Object.keys(t);if(i&&i.length>0&&t[i[0]]&&t[i[0]].meta&&t[i[0]].meta.type.includes("video")){try{var a=e.props.onsite_token;e.setState({isLoading:!0});var n=t[i[0]],s=new FormData;s.append("file",n.data),s.append("onsite_token",a),w().post(P.so,s).then((function(t){var i=t.data.responseData;i&&i.length>0&&(e.setState({videoPath:i[0].sscode,isLoading:!1,type:5,selectedFile:i[0].s3Url,selectedUrl:i[0].s3Url,thumb_file:i[0].s3ThumbUrl,ext:n.extension,size:n.size,fileName:n.name,mediaHeight:i[0].height,mediaWidth:i[0].width},(function(){return e.onUpdateLocalState()})),(0,M.AB)(2))})).catch((function(t){e.setState({isLoading:!1,throwError:!0},(function(){return setTimeout((function(){return e.setState({throwError:!1})}),2e3)})),e.uppyUploader.uppy.reset(),(0,M.AB)(2)}))}catch(o){e.setState({isLoading:!1,throwError:!0},(function(){return setTimeout((function(){return e.setState({throwError:!1})}),2e3)})),e.uppyUploader.uppy.reset(),(0,M.AB)(2)}return!1}},e.uppyUploader=new E(e.beforeFileAdded,e.beforeUpload),e.onUpdateLocalState=function(){var t=e.props,i=t.addPostImage,a=t.isActiveIndex,n=e.state,s=n.selectedUrl,o=n.type,r=n.thumb_file;i(s,5===o?r:s,n.videoPath,o,a,n.ext,n.size,n.fileName,n.mediaHeight,n.mediaWidth),e.setState({selectedFile:null,selectedUrl:null,type:null,thumb_file:"",fileSize:!1,fileSizeText:"",videoPath:"",ext:null,size:0,fileName:null,mediaHeight:0,mediaWidth:0},(function(){return e.uppyUploader.uppy.reset()}))},e}return(0,n.Z)(i,[{key:"componentDidMount",value:function(){var e=this;this.uppyUploader.uppy.on("transloadit:result",(function(t,i){var a=i.meta.orientation&&"Rotate 90 CW"==i.meta.orientation?i.meta.width:i.meta.height,n=i.meta.orientation&&"Rotate 90 CW"==i.meta.orientation?i.meta.height:i.meta.width;e.setState({type:i.mime.includes("video")?5:4,selectedFile:i.id,selectedUrl:"https://cloud.taggbox.com/onsiteupload/images/".concat(i.id),ext:i.ext,size:i.size,fileName:i.name,mediaHeight:a,mediaWidth:n},(function(){return e.onUpdateLocalState()})),(0,M.AB)(2)})),this.uppyUploader.uppy.on("file-removed",(function(e,t){(0,M.AB)(2)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,i=e.fileSize,a=e.throwError,n=e.fileSizeText,s=e.filemaxSize,o=e.type;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.v0,{note:"Video Size : Max 100MB | Photo Size : Max 15MB | Max 20 Posts",uppy:this.uppyUploader.uppy,allowMultipleFiles:!1,locale:{strings:{dropHereOr:"Drag a video / image to upload (optional)",browse:""}}}),(0,d.jsxs)("div",{className:"tb_onsite_uploader_status",children:[(0,d.jsx)(k.A_,{uppy:this.uppyUploader.uppy,hideUploadButton:!0,hideAfterFinish:!1,showProgressDetails:!0}),t?(0,d.jsx)(N,{}):null,i?(0,d.jsxs)("div",{className:"tb_onsite_uploader_limit_error submit_limit_size",style:{marginTop:5,display:"flex",alignItems:"center"},children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",children:(0,d.jsxs)("g",{id:"Stockholm-icons-/-Code-/-Info-circle",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd",children:[(0,d.jsx)("rect",{id:"bound",x:"0",y:"0",width:"24",height:"24"}),(0,d.jsx)("circle",{id:"Oval-5",fill:"#db4b20",opacity:"0.3",cx:"12",cy:"12",r:"10"}),(0,d.jsx)("rect",{id:"Rectangle-9",fill:"#db4b20",x:"11",y:"10",width:"2",height:"7",rx:"1"}),(0,d.jsx)("rect",{id:"Rectangle-9-Copy",fill:"#db4b20",x:"11",y:"7",width:"2",height:"2",rx:"1"})]})}),"File Size (",n,") Limit Exceeded ",4==o?"Image":"Video"," Size : Max ","".concat(s,"MB")]}):null,a?(0,d.jsxs)("div",{className:"tb_onsite_uploader_limit_error submit_limit_size",style:{marginTop:5,display:"flex",alignItems:"center"},children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",children:(0,d.jsxs)("g",{id:"Stockholm-icons-/-Code-/-Info-circle",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd",children:[(0,d.jsx)("rect",{id:"bound",x:"0",y:"0",width:"24",height:"24"}),(0,d.jsx)("circle",{id:"Oval-5",fill:"#db4b20",opacity:"0.3",cx:"12",cy:"12",r:"10"}),(0,d.jsx)("rect",{id:"Rectangle-9",fill:"#db4b20",x:"11",y:"10",width:"2",height:"7",rx:"1"}),(0,d.jsx)("rect",{id:"Rectangle-9-Copy",fill:"#db4b20",x:"11",y:"7",width:"2",height:"2",rx:"1"})]})}),"Something went wrong , Please try again."]}):null]})]})}}]),i}(r.Component),z=I,R=function(e){var t=e.item,i=e.isActiveIndex,a=e.onClickToImageRemove;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{loading:"lazy",className:"tb_onsite_uploaded",src:t.thumb_file,height:"200",width:"300",alt:"Post"}),(0,d.jsx)("div",{className:"tb_onsite_remove_ico",onClick:a(i),children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,d.jsxs)("g",{"data-name":"Group 4331",transform:"translate(10956 -4533)",children:[(0,d.jsx)("rect",{id:"Rectangle_2069","data-name":"Rectangle 2069",width:"24",height:"24",transform:"translate(-10956 4533)",fill:"none",opacity:"0"}),(0,d.jsx)("g",{id:"Group_4324","data-name":"Group 4324",transform:"translate(-10952 4536)",children:(0,d.jsx)("path",{id:"Path_5188","data-name":"Path 5188",d:"M2.722,16.328A2,2,0,0,0,4.694,18h6.612a2,2,0,0,0,1.972-1.672L14,6H2ZM9,9.5A.5.5,0,0,1,9.5,9h1a.5.5,0,0,1,.5.5v5a.5.5,0,0,1-.5.5h-1a.5.5,0,0,1-.5-.5Zm-4,0A.5.5,0,0,1,5.5,9h1a.5.5,0,0,1,.5.5v5a.5.5,0,0,1-.5.5h-1a.5.5,0,0,1-.5-.5ZM15,2H11A2,2,0,0,0,9,0H7A2,2,0,0,0,5,2H1A1,1,0,0,0,1,4H15a1,1,0,0,0,0-2Z",fill:"#545454","fill-rule":"evenodd"})})]})})})]})},Z=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.updateImageWithData,i=e.isActiveIndex,a=e.addPostImage,n=e.item,s=e.onClickToImageRemove,o=e.onsite_token;return(0,d.jsx)("div",{className:"tb_onsite_add_caption_tab",children:(0,d.jsx)("div",{className:"tb_onsite_image_upload_box",children:(0,d.jsx)("div",{className:"tb_onsite_upload_box_content",children:n&&Object.keys(n).length>0&&n.thumb_file?(0,d.jsx)(R,{item:n,isActiveIndex:i,onClickToImageRemove:s}):(0,d.jsx)(z,{updateImageWithData:t,isActiveIndex:i,addPostImage:a,onsite_token:o})})})})}}]),i}(r.Component),B=Z;var F=function(e){var t=e.wall;return(0,d.jsx)("div",{className:"tb_success_post",children:(0,d.jsxs)("div",{className:"tb_success_post_box",children:[(0,d.jsx)("svg",{width:"70",height:"70",version:"1.1",viewBox:"0 0 700 700",xmlns:"http://www.w3.org/2000/svg",fill:"#6DC05E",children:(0,d.jsx)("path",{d:"m350 536.67c68.07 0 133.36-27.043 181.49-75.176 48.133-48.137 75.176-113.42 75.176-181.49s-27.043-133.36-75.176-181.49c-48.137-48.133-113.42-75.176-181.49-75.176s-133.36 27.043-181.49 75.176c-48.133 48.137-75.176 113.42-75.176 181.49s27.043 133.36 75.176 181.49c48.137 48.133 113.42 75.176 181.49 75.176zm-133.23-249.9c4.3711-4.3438 10.285-6.7852 16.449-6.7852 6.168 0 12.078 2.4414 16.453 6.7852l53.664 53.668 135.1-135.1c6.0078-5.1445 14.211-6.8945 21.793-4.6523 7.5859 2.2422 13.516 8.1758 15.758 15.758 2.2461 7.5859 0.49219 15.789-4.6523 21.797l-151.67 151.67 0.003907-0.003906c-4.375 4.3477-10.285 6.7852-16.453 6.7852-6.1641 0-12.078-2.4375-16.449-6.7852l-70-70c-4.418-4.3789-6.9023-10.344-6.9023-16.566 0-6.2188 2.4844-12.184 6.9023-16.566z"})}),(0,d.jsxs)("div",{className:"tb_onsite_success_title cTBfont-".concat(t.UgcSettings.onsite_font_varient_btn),style:{color:t.UgcSettings.onsite_thank_txt_color,fontFamily:t.UgcSettings.onsite_css_font_msg,fontSize:parseInt(t.UgcSettings.onsite_thank_fontSize)},children:[" ",t.UgcSettings.onsite_status?t.UgcSettings.onsite_succ_msg:"Thank you for sharing your amazing content with us."]}),(0,d.jsx)("button",{className:"tb_onsite_btn_primary",onClick:e.onClosePopUp,children:"Close"})]})})},D=i(70188),W=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},H=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;(0,a.Z)(this,i);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={submitPost:!0,activeTab:1,isOpen:!0,step:1,wall_id:null,name:null,email:null,upload_image:[{file:null,caption:null,review:null,rating:0,error:!1,activeTab:1,type:1,thumb_file:"",videoPath:""}],receiveMail:!1,tandc:!0,nameError:!1,emailError:!1,submitErrorMessage:null,apiRequest:!1,isActiveIndex:0,isAddMoreActive:!1,isEdit:!1,submitError:!1,is_terms_check:0},e.handleNext=function(t){return e.setState({submitPost:!1})},e.hanleTab1=function(t){return e.setState({activeTab:1})},e.hanleTab2=function(t){return e.setState({activeTab:2})},e.onShowCloseSubmitPicPopUp=function(t){var i=e.state.isOpen;e.setState({isOpen:!i})},e.updateImageWithData=function(t){var i=e.state.upload_image;i&&i.length<20&&(i.push(t),e.setState({upload_image:i}))},e.onClickToaddMore=function(t){var i=e.state.upload_image,a=e.props.wall;if(i&&i.length<20){var n=3==a.UgcSettings.choose_content_category?2:1;i.push({file:null,caption:null,review:null,rating:0,error:!1,activeTab:n,type:1,thumb_file:"",videoPath:""}),e.setState({isAddMoreActive:!0,upload_image:i,isActiveIndex:0==i.length||1==i.length?0:parseInt(i.length)-1,step:1,activeTab:n,submitError:!1})}},e.onClickToUpdateMoreStep=function(t){return function(i){var a=e.state,n=a.isAddMoreActive,s=a.isActiveIndex,o=a.upload_image;n&&o[s]&&o.splice(s,1),e.setState({isAddMoreActive:!1,upload_image:o,step:t,isEdit:!1,isActiveIndex:o&&o.length>0&&parseInt(o.length)-1>0?parseInt(o.length)-1:0,activeTab:1})}},e.onClickToUpdateStep=function(t){return function(i){var a=!1,n=e.state,s=n.upload_image,o=n.isActiveIndex,r=n.activeTab;s&&s[o]&&(1==r?null==s[o].caption||""==s[o].caption||0==s[o].caption.trim().length?(s[o].error=!0,a=!0):s[o].error=!1:2==r&&(null==s[o].review||""==s[o].review||0==s[o].review.length||0==s[o].rating?(s[o].error=!0,a=!0):s[o].error=!1)),a?e.setState({upload_image:s}):e.setState({isAddMoreActive:!1,upload_image:s,step:t,isEdit:!1,activeTab:1,submitErrorMessage:null})}},e.onSubmitPostData=function(t){var i=e.state,a=i.name,n=i.email,s=i.upload_image,o=i.is_terms_check,r=i.tandc,l=i.receiveMail,d=(i.apiRequest,e.props),u=d.wallId,m=(d.onSite,d.modalPop),p=d.wall,_=d.feeds;if(e.setState({submitError:!1}),r&&a&&a.length>0&&n&&n.length>0&&W(n)&&!n.includes("mailinator")&&s&&s.length>0&&r){e.setState({apiRequest:!0});var h=!!window.ugcSuite||!!window.location.href.includes("ugcSuite=1"),g={};h&&_&&_.length>0&&_.map((function(e){e&&e.Network&&Object.keys(e.Network).length>0&&29==e.Network.id&&e.value1&&(g={feedId:e.value1})}));var v=(0,c.Z)({wall_id:u,name:a,email:n,upload_file:s,receive_mail:l,onsite_token:m.onsite_token},g);[104746].includes(p.Wall.owner)&&(v.is_terms_check=o),(0,f.uM)(v).then((function(t){var i=t.data.onsite_token;e.props.onsiteTokenUpdate(i),e.setState({step:3,apiRequest:!1},(function(){return setTimeout((function(){return e.props.onSitePopup(!1)}),5e4)}),document.querySelector("html").style.overflow="auto")})).catch((function(t){var i=t.toJSON().message;i&&e.setState({submitError:!0,submitErrorMessage:i,apiRequest:!1}),console.error(t)}))}else null!=e.state.name&&0!=e.state.name.trim().length||e.setState({nameError:!0,apiRequest:!1}),null!=e.state.email&&0!=e.state.email.trim().length&&W(e.state.email)&&!n.includes("mailinator")||e.setState({emailError:!0,apiRequest:!1}),s&&0==s.length&&e.setState({submitError:!0})},e.addCaption=function(t){return function(i){var a=e.state.upload_image;a&&a[t]&&(a[t].caption=i.target.value,a[t].review="",a[t].rating=0,a[t].error=!1,a[t].activeTab=1,e.setState({upload_image:a}))}},e.addReview=function(t){return function(i){var a=e.state.upload_image;a&&a[t]&&(a[t].review=i.target.value,a[t].caption="",a[t].error=!1,a[t].activeTab=2,e.setState({upload_image:a}))}},e.addRatings=function(t,i){var a=e.state.upload_image;a&&a[i]&&(a[i].caption="",a[i].rating=t,a[i].error=!1,a[i].activeTab=2,e.setState({upload_image:a}))},e.addPostImage=function(t,i,a,n,s,o,r,l,c,d){var u=e.state.upload_image;u&&u[s]&&(u[s].file=t,u[s].thumb_file=i,u[s].videoPath=a,u[s].type=n,u[s].ext=o,u[s].size=r,u[s].fileName=l,u[s].mediaHeight=c,u[s].mediaWidth=d,e.setState({upload_image:u}))},e.onClickToRemove=function(t){return function(i){var a=e.state.upload_image;a&&a.length>0&&a.splice(t,1),e.setState({upload_image:a})}},e.onClickToImageRemove=function(t){return function(i){var a=e.state.upload_image;a&&a[t]&&(a[t].file=null,a[t].thumb_file="",a[t].videoPath="",a[t].type=1,a[t].ext=null,a[t].size=0,a[t].fileName=null,a[t].mediaHeight=0,a[t].mediaWidth=0,e.setState({upload_image:a}),(0,M.AB)(2))}},e.onClickToEdit=function(t){return function(i){var a=e.state.upload_image,n=1;a&&a[t]&&(n=a[t].activeTab),e.setState({isActiveIndex:t,isEdit:!0,step:1,activeTab:n})}},e.onTextName=function(t){e.setState({name:t.target.value,nameError:!1},(function(){null!=e.state.name&&0!=e.state.name.length||e.setState({nameError:!0})}))},e.onTextEmail=function(t){e.setState({email:t.target.value,emailError:!1},(function(){null!=e.state.email&&0!=e.state.email.length&&W(e.state.email)&&!e.state.email.includes("mailinator")||e.setState({emailError:!0})}))},e.onUpdatereceiveMail=function(t){var i=e.state.receiveMail;e.setState({receiveMail:!i})},e.onUpdatetandc=function(t){var i=e.state.tandc;e.setState({tandc:!i})},e.onClosePopUp=function(){e.props.onSitePopup(!1),document.querySelector("html").style.overflow="auto"},e.termsCheck=function(t){e.setState({is_terms_check:t})},e}return(0,n.Z)(i,[{key:"componentDidMount",value:function(){var e=this.props.wall;this.setState({activeTab:3==e.UgcSettings.choose_content_category?2:1})}},{key:"render",value:function(){var e=this.state,t=(e.submitPost,e.activeTab),i=e.isActiveIndex,a=e.step,n=e.upload_image,s=e.isAddMoreActive,o=e.isEdit,r=e.name,l=e.email,c=e.receiveMail,u=e.tandc,p=e.nameError,_=e.emailError,h=e.apiRequest,g=e.submitError,b=e.submitErrorMessage,f=this.props,y=f.wall,w=f.modalPop,k={backgroundImage:"url(".concat(D.do,"/media/images/nopost.png)")},N=this.onClosePopUp;return y&&y.UgcSettings&&Object.keys(y.UgcSettings).length>0&&y.UgcSettings.onsite_status?(0,d.jsx)("div",{className:"onsite_submit_post_main",style:{backgroundImage:y.UgcSettings.onsite_background_image?"url(".concat(y.UgcSettings.onsite_background_image,")"):null,backgroundColor:y.UgcSettings.onsite_background_color},children:(0,d.jsx)("div",{className:"tb_onsite_post_inner",children:(0,d.jsx)("div",{className:"tb_onsite_upload_post",children:(0,d.jsxs)("div",{className:"tb_onsite_box",children:[(0,d.jsxs)("div",{className:"tb_onsite_box_header",children:[(0,d.jsx)(S,{onClosePopUp:N}),(0,d.jsx)(j,{wall:y})]}),1==a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"tb_onsite_box_title",children:[(0,d.jsx)("div",{className:"tb_onsite_title",children:y.UgcSettings.onsite_status?y.UgcSettings.onsite_popup_title:"Share Your Images With Us"}),(0,d.jsx)("div",{className:"tb_onsite_sub_heading",children:y.UgcSettings.onsite_status?y.UgcSettings.onsite_popup_sub_heading:"Upload your image featuring our brand products and get a chance to feature in our UGC lookbook. "})]}),(0,d.jsxs)("div",{className:"tb_onsite_box_body",children:[1==y.UgcSettings.choose_content_category?(0,d.jsxs)("div",{className:"tb_onsite_post_tabs",children:[1==y.UgcSettings.choose_content_category?(0,d.jsx)("div",{className:"tb_onsite_separator",children:"OR"}):null,(0,d.jsxs)("div",{className:"tb_onsite_tabs_nav",children:[1==y.UgcSettings.choose_content_category||2==y.UgcSettings.choose_content_category?(0,d.jsx)("div",{className:"tb_onsite_tabs ".concat(1!=y.UgcSettings.choose_content_category?"active-single-tab":""," ").concat(1==t||2==y.UgcSettings.choose_content_category?" active":""),style:2==y.UgcSettings.choose_content_category?{width:"100%"}:{},onClick:this.hanleTab1,children:"Add Caption"}):null,1==y.UgcSettings.choose_content_category||3==y.UgcSettings.choose_content_category?(0,d.jsx)("div",{className:"tb_onsite_tabs ".concat(1!=y.UgcSettings.choose_content_category?"active-single-tab":""," ").concat(2==t||3==y.UgcSettings.choose_content_category?" active":""),style:3==y.UgcSettings.choose_content_category?{width:"100%"}:{},onClick:this.hanleTab2,children:"Submit Review"}):null]})]}):null,(0,d.jsxs)("div",{className:"tb_onsite_tabs_content",children:[(0,d.jsx)(B,{updateImageWithData:this.updateImageWithData,isActiveIndex:i,addPostImage:this.addPostImage,item:n[i],onClickToImageRemove:this.onClickToImageRemove,onsite_token:w.onsite_token},i),1==t?(0,d.jsx)(m,{hasActive:this.handleNext,isActiveIndex:i,onClickToUpdateStep:this.onClickToUpdateStep,onClickToUpdateMoreStep:this.onClickToUpdateMoreStep,isAddMoreActive:s,addCaption:this.addCaption,item:n[i]}):(0,d.jsx)(x,{isActiveIndex:i,onClickToUpdateStep:this.onClickToUpdateStep,onClickToUpdateMoreStep:this.onClickToUpdateMoreStep,isAddMoreActive:s,addReview:this.addReview,item:n[i],addRatings:this.addRatings})]})]})]}):2==a?(0,d.jsx)(v,{termsCheck:this.termsCheck,submitError:g,submitErrorMessage:b,onClickToaddMore:this.onClickToaddMore,onSubmitPostData:this.onSubmitPostData,upload_image:n,isEdit:o,onClickToRemove:this.onClickToRemove,onTextName:this.onTextName,onTextEmail:this.onTextEmail,name:r,email:l,receiveMail:c,tandc:u,onUpdatereceiveMail:this.onUpdatereceiveMail,nameError:p,emailError:_,wall:y,onClickToEdit:this.onClickToEdit,apiRequest:h}):3==a?(0,d.jsx)(F,{wall:y,onClosePopUp:N}):null]})})})}):(0,d.jsx)("div",{className:"onsite_submit_post_main",children:(0,d.jsxs)("div",{className:"tb_error_page wall_error",children:[(0,d.jsx)("div",{className:"tb_error_page_bg",style:k,children:" "}),(0,d.jsx)("div",{className:"tb_error_page_wrapper",children:(0,d.jsxs)("div",{className:"tb_error_content",children:[(0,d.jsx)("div",{className:"tb_error_title",children:"Thanks for Your Efforts!"}),(0,d.jsx)("div",{className:"tb_error_des",children:"Our review collection campaign has come to an end. We appreciate your interest. \ud83d\ude42"})]})})]})})}}]),i}(r.Component),O=(0,l.$j)((function(e){return void 0!=e.modalPop&&1==e.modalPop.onSiteIsShowPopUp&&(document.querySelector("html").style.overflow="hidden"),{modalPop:e.modalPop}}),(function(e){return{onSitePopup:function(t){return e((0,f.wg)(t))},onsiteTokenUpdate:function(t){return e((0,f.q3)(t))}}}))(H),L=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.modalPop,i=e.appData;return(0,d.jsx)(d.Fragment,{children:t.onSiteIsShowPopUp&&i.wall&&Object.keys(i.wall.Wall).length>0?(0,d.jsx)(O,{wall:i.wall,wallId:i.wall.Wall.id,feeds:i.feeds}):""})}}]),i}(r.PureComponent),q=(0,l.$j)((function(e){return{modalPop:e.modalPop,appData:e.appData,loaderData:e.loaderData}}))(L)}}]);
//# sourceMappingURL=586.bb2470ad.chunk.js.map