"use strict";(self.webpackChunkembed_widget=self.webpackChunkembed_widget||[]).push([[115],{40115:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var a=i(72791),n=i(79200),d=i(80413),r=i(2703),o=i(70188),s=i(80184);class h extends a.PureComponent{constructor(e){super(e),this.updateDimensions=()=>{let e=this.ImgWrap.current.getBoundingClientRect();e&&this.setState({newSize:{height:e.height.toFixed(),width:e.width.toFixed()}})},this.onMediaLoad=async e=>{const{data:t}=this.props,{imgUrl:i}=this.state;if(t&&Object.keys(t).length>0&&[4,5,3].includes(t.type))if(t.mediaHeight&&""!=t.mediaHeight&&t.mediaWidth&&""!=t.mediaWidth)this.setState({mediaSize:{height:t.mediaHeight,width:t.mediaWidth}});else try{const{width:e,height:t}=await(0,d.Ad)(i);this.setState({mediaSize:{height:t,width:e}})}catch(a){this.setState({loadError:!0,mediaSize:{height:100,width:100}})}},this.onLoad=e=>{1==e.target.getAttribute("data-load")&&this.setState({imgUrl:e.target.src})},this.state={loadError:!1,imgUrl:this.props.data.postFileNew,percentHeight:"100",newSize:{height:100,width:100},mediaSize:{height:100,width:100}},this.ImgWrap=a.createRef()}componentDidMount(){this.updateDimensions(),this.props.size||this.onMediaLoad()}render(){const{ImageClass:e,data:t,wallID:i,themeID:a,ownerId:d,size:h}=this.props,{imgUrl:c,newSize:l,mediaSize:g}=this.state,u={paddingBottom:h?"".concat(h,"%"):100*g.height/g.width+"%"};return(0,s.jsx)("div",{className:"".concat(e,"_wrap_ mediaHolder").concat(t.id),style:u,ref:this.ImgWrap,children:(0,s.jsx)("img",{className:e,role:"img",src:c,height:300,width:300,"data-link":t.link,"data-load":"0","data-network":t.network.id,"data-wall-id":i,"data-owner-id":d,"data-item-id":t.id,"data-filter-id":t.filterId,"theme-id":a,onLoad:this.onLoad,onError:t.stories?null:e=>{e.target.src="".concat(o.do,"/media/images/no-image.svg"),(0,n.ht)(e)},alt:(0,r.P)(c)})})}}},80413:(e,t,i)=>{t.Ad=void 0;var a=i(7782);var n=i(94590);Object.defineProperty(t,"Ad",{enumerable:!0,get:function(){return n.getImageSize}});var d=i(52047)},7782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorMessage=void 0,t.ErrorMessage={WINDOW_IS_NOT_DEFINED:"Window is not defined",URL_IS_NOT_DEFINED:"Url is not defined",TIMEOUT:"Timeout"}},94590:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getImageSize=void 0;const a=i(7782);t.getImageSize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((i,n)=>{if("undefined"===typeof window)return n(a.ErrorMessage.WINDOW_IS_NOT_DEFINED);if(!e)return n(a.ErrorMessage.URL_IS_NOT_DEFINED);let d=null;const r=new Image;r.addEventListener("load",(()=>{d&&window.clearTimeout(d),i({width:r.naturalWidth,height:r.naturalHeight})})),r.addEventListener("error",(e=>{d&&window.clearTimeout(d),n("".concat(e.type,": ").concat(e.message))})),r.src=e,t.timeout&&(d=window.setTimeout((()=>n(a.ErrorMessage.TIMEOUT)),t.timeout))}))}},52047:function(e,t,i){var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(n,d){function r(e){try{s(a.next(e))}catch(t){d(t)}}function o(e){try{s(a.throw(e))}catch(t){d(t)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,o)}s((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useImageSize=void 0;const n=i(72791),d=i(94590);t.useImageSize=(e,t)=>{const[i,r]=(0,n.useState)(null),[o,s]=(0,n.useState)(!1),[h,c]=(0,n.useState)(null);return(0,n.useEffect)((()=>{a(void 0,void 0,void 0,(function*(){s(!0),r(null);try{const{width:i,height:a}=yield(0,d.getImageSize)(e,t);r({width:i,height:a})}catch(h){c(h.toString())}finally{s(!1)}}))}),[e,t]),[i,{loading:o,error:h}]}}}]);
//# sourceMappingURL=115.0c50fdd4.chunk.js.map